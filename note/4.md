# 1186. 删除一次得到子数组最大和

dp数组1是不存在删除情况的，保存以arr[i]结尾的区间和最大值,dp数组2是下的存在删除情况的，保存以arr[i]结尾的区间和最大值

```java
if(arr.length==1) {
    return arr[0];
}
int dp1=arr[0];
int dp2=-2000001;
int ans=-2000001;
for(int i=1;i<arr.length;++i) {
    dp2=Math.max(dp2+arr[i], dp1);//保存删除情况下的区间和最大值
    dp1=Math.max(dp1+arr[i], arr[i]);//保存不删除情况下的区间和最大值
    ans=Math.max(ans, Math.max(dp1, dp2));
}
return ans;
```

空间复杂度$O(1)$，时间复杂度$O(n)$

---

这道题在我重新写的时候，思路有些卡住了，是没有深刻理解的原因。

重新理解一下这道题目的思路。

这道题目出现最大值的可能性有两种，一种是子数组，里面没有删除元素，即dp1，另外一种是子数组删除了一个元素，即dp2。

可以意识到，我们可以讲大的问题分解成为小的问题。

当数组长度为1，2的时候，很容易解决。

我们假设数组长度为len。假设我们此时已经获得了当n=k(k < len)时的两种子数组的元素之和。那么，对于n=k+1时，可以得到，最大值的四种新可能：

- n=k 没有删除元素的数组 + 新的元素
- n=k 删除元素的数组 + 新的元素
- 新的元素
- n=k 没有删除元素的数组

max在以上四种情况以及max本身一共五种情况下产生。

其中，第一，第三种情况，产生的，是没有删除元素的数组，对应dp1；第二，第四种情况，产生的，是删除了元素的数组，对应dp2。

